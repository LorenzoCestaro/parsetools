# Textools

**Textools** provides a command line interface for __extracting text from
.pdf and .html documents__. The core packages used for text extraction are
[textract](http://textract.readthedocs.io/en/latest/python_package.html) (pdf) and
[beautifoulsoup4](https://www.crummy.com/software/BeautifulSoup/bs4/doc/) (html).

The package also supports text __extraction from .csv__ files originated by crawling data from the web (e.g. with [ScraPy](https://scrapy.org/)).

* [Install](#install)
* [Usage](#usage)
    * [pdfparse](#pdfparse)
    * [htmlparse](#htmlparse)
    * [csvparse](#csvparse)

___

### Install

To install the package globally or in a virtual environment use:

`$ (sudo) pip install parsetools`

### Usage
___
#### pdfparse
Use `pdfparse` to extract text from pdf files singularly or recursively.

```
$ pdfparse <path-to-input-file-or-dir> [-o --output <path-to-output>] [-r --recursive] [-c --clean]

-o --output:         specify an output file when parsing single files
                     Defaults to input filename if not specified or
                     in recursive mode

-r --recursive:      parse all the pdf files in a folder recursively
-c --clean:          Perform some basic text cleaning
                     before saving the output
```
___
#### htmlparse
Use `htmlparse` to extract text from html files singularly or recursively.

```
$ htmlparse <path-to-input-file-or-dir> [-o --output <path-to-output>] [-r --recursive] [-c --clean]

-o --output:         specify an output file when parsing single files
                     Defaults to input filename if not specified or
                     in recursive mode

-r --recursive:      parse all the pdf files in a folder recursively
-c --clean:          Perform some basic text cleaning
                     before saving the output
```
___
#### csvparse
`csvparse` is a commands that pipelines csv parsing and html parsing. It is intended to process __html data generated by web crawlers__ and will not work with generic .csv files that do not contain valid html in one of the column variables.

__The command must be invoked as many times as the column labels to process.__

```
$ csvparse <path-to-input-file-or-dir> <-l --label> [-o --output <path-to-output>] [-r --recursive] [-c --clean]

-l --label:          specify the label of the column containing
                     the html to process
-o --output:         specify an output file when parsing single files
                     Defaults to input filename if not specified or
                     in recursive mode

-r --recursive:      parse all the pdf files in a folder recursively
-c --clean:          Perform some basic text cleaning
                     before saving the output
```

This command will return two output files: one containing all the html extracted from the .csv input file and a second one containing the text extracted from the html.
